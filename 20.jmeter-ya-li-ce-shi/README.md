# 20.JMeter 壓力測試

### • 壓力測試必須使用專屬的電腦設備，盡量不要使用 VM \(虛擬機器\) 實施壓力測試，才能真正模擬出較為真實的壓力測試數據。

###  • 要實施專業的網站壓力測試，應該會有以下設備要事先準備：

o 受測系統主機：對於要被施加壓力的主機.   
o 測試控制器主機：由控制器主機發動測試並收集壓力測試過程中所有數據.   
o 測試代理程式主機：由多台測試代理程式主機實際發動測試，對受測系統施加壓力 .  
o 網路交換器\(Switch\)：在負載平衡的網站架構下可能需要網管型 Switch 的設備支援.   
o 負載平衡器\(Load Balancer\)：測試過程可能會用到硬體式的負載平衡器設備, 確認壓測server 主機 若有多台 主機 Loadbalence 是否平均分散於各台主機.  
o 防火牆設備\(Firewall\)：測試過程可能會需要測試出防火牆設備的吞吐量\(Throughput\).

### • 受測環境網路規劃

o 進行壓力測試時，建議排除「網路」可能造成的任何影響，也就是不要將受測主機擺在遠端，最好是將壓測主機與受測主機都擺在同一個區域網路\(LAN\)裡來測試，因為我們主要測試的是受測主機實際吞吐量，加入了網路變數後壓力數據就會嚴重失真，那麼這份報告的精確度也不會高。   
o 是否要設置一個獨立的 IP 網段做壓力測試？ 建議盡量用獨立網段作業，不要跟公司內網正在用的網段來測試，不然可能會影響公司其他同仁的網路運作。  
 o 透過負載平衡器做壓測可能會受到 IP 來源的影響而導致負載不夠均衡，因此建議可用多個 IP 同時進行壓測，這功能在 Visual Studio 2010 Ultimate 裡找的到。

### • AD 環境建置

o 由於必須模擬出生產環境\(Production Environment\)的部署架構，所以很有可能需要建置一個壓力測試用的 AD 環境。

### • IIS 網站伺服器調校

o 網站部署後必須調校 IIS 設定以調出最佳性能，所以在壓力測試的過程中可能要不斷微調 IIS 伺服器的設定。

